<!DOCTYPE html>
<html>
<head>
  <title>Spring OAuth</title>
  <link rel="stylesheet" type="text/css" href="/spring-security-oauth/bootstrap/css/bootstrap.min.css" />
  <link href='http://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="/spring-security-oauth/font-awesome/css/font-awesome.min.css" />
  <link rel="stylesheet" type="text/css" href="/spring-security-oauth/bootstrap/css/bootstrap-select.css" />

  <link rel="stylesheet" type="text/css" href="/spring-security-oauth/css/main.css.css" />
  <link rel="stylesheet" type="text/css" href="/spring-security-oauth/css/typography.css.css" />
  <link rel="stylesheet" type="text/css" href="/spring-security-oauth/css/icons.css.css" />
  <link rel="stylesheet" type="text/css" href="/spring-security-oauth/css/projects.css.css" />
  <link rel="stylesheet" type="text/css" href="/spring-security-oauth/css/buttons.css.css" />
  <link rel="stylesheet" type="text/css" href="/spring-security-oauth/css/guide.css.css" />

  <script type="text/javascript" src="/spring-security-oauth/js/jquery.js"></script>
  <script type="text/javascript" src="/spring-security-oauth/bootstrap/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="/spring-security-oauth/bootstrap/js/bootstrap-select.js"></script>

  <script type="text/javascript" src="/spring-security-oauth/js/underscore.js"></script>
  <script type="text/javascript" src="/spring-security-oauth/js/backbone.js"></script>
  <script type="text/javascript" src="/spring-security-oauth/js/projectDocumentationWidget.js"></script>
  <script type="text/javascript" src="/spring-security-oauth/js/application.js"></script>
  <script type="text/javascript" src="/spring-security-oauth/js/ZeroClipboard.min.js"></script>
  <script type="text/javascript">
    var apiBaseUrl = "http://springframework.io";
    var projectId = "spring-security-oauth";
    var siteBaseUrl = "/spring-security-oauth";
  </script>
  <script type="text/javascript" src="/spring-security-oauth/js/copySnippets.js"></script>
  <meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" />
</head>
<body>
  <header class="navbar header--navbar">
    <div class="navbar-inner">
      <div class="container-fluid">
        <div class="spring-logo--container">
          <div class="logo-bg"></div>
          <a class="spring-logo" href="http://springframework.io"></a>
        </div>
        <ul class="nav pull-right">
          <li class="navbar-link">
            <a href="http://springframework.io/docs">Docs</a>
          </li>
          <li class="navbar-link">
            <a href="http://springframework.io/guides">Guides</a>
          </li>
          <li class="navbar-link active">
            <a href="http://springframework.io/projects">Projects</a>
          </li>
          <li class="navbar-link">
            <a href="http://springframework.io/blog">Blog</a>
          </li>
          <li class="navbar-link">
            <a href="http://forum.springframework.io">Forum</a>
          </li>
          <li class="navbar-link nav-search">
            <i class="icon-search navbar-search--icon js-search-input-open"></i>
            <div class="search-input-close js-search-input-close">x</div>
          </li>
        </ul>
      </div>
    </div>
    <div class="search-dropdown--container js-search-dropdown">
      <div class="container-fluid">
        <div class="search-form--container">
          <form class="form-inline form-search" action="http://springframework.io/search" method="get">
            <input type="text" class="search-query search-form--form js-search-input" placeholder="Search for documention, guides, and posts..." name="q" />
            <button type="submit" class="search-form--submit"><i class="icon-search"></i></button>
          </form>
        </div>
      </div>
    </div>
  </header>

  <div class="body--container container-fluid">
    <h1 id="toc_0">Tutorial</h1>

<h2 id="toc_1">Introduction</h2>

<p>There&#39;s a good <a href="http://www.hueniverse.com/hueniverse/2007/10/beginners-gui-1.html">getting started guide</a> that illustrates OAuth
1.0 by describing two different (but related) services.  One is a photo-sharing application.  The other is a photo-printing
application.  In OAuth terms, the photo sharing application is the OAuth <em>provider</em> and the photo printing application
is the OAuth <em>consumer</em> or <em>client</em>.</p>

<p>For this tutorial, we will see OAuth for Spring Security in action by deploying a photo-sharing application and a
photo-printing application on our local machine.  We&#39;ll name the photo-sharing application &quot;Sparklr&quot; and the
photo-printing application &quot;Tonr&quot;.  A user named &quot;Marissa&quot; (who has an account at both Sparkr and Tonr) will use Tonr
to access her photos on Sparklr without ever giving Tonr her credentials to Sparklr.</p>

<p>There is a Sparklr application for both OAuth 1.0 and for OAuth 2.0,
likewise Tonr. The best way to run them is to clone or download the
<a href="https://github.com/SpringSource/spring-security-oauth/tree">repo on github</a>
and run from source code See the
<a href="https://github.com/SpringSource/spring-security-oauth/tree/master/samples">samples/README.md</a>
for detailed instructions. </p>

<table><thead>
<tr>
<th>OAuth 1.0</th>
<th>OAuth 2.0</th>
</tr>
</thead><tbody>
<tr>
<td>Sparklr 1</td>
<td>Sparklr 2</td>
</tr>
<tr>
<td>Tonr 1</td>
<td>Tonr 2</td>
</tr>
</tbody></table>

<p>Each application is a standard <a href="http://maven.apache.org/">Maven</a> project, so you will need Maven installed. Each
application is also a Spring MVC application with Spring Security integrated. If you are familiar with Spring and Spring
Security, the configuration files will look familiar to you (the OAuth2 samples use a single application context whereas
many MVC applications use a root context and a child for the DispatcherServlet).</p>

<h2 id="toc_2">Setup</h2>

<p>Checkout the Sparklr and Tonr applications, and take a look around. Note especially the Spring configuration files in <code>src/main/webapp/WEB-INF</code>.</p>

<p>For Sparklr, you&#39;ll notice the definition of the OAuth provider mechanism and the consumer/client details along with the
<a href="http://static.springsource.org/spring-security/site/docs/3.0.x/reference/ns-config.html">standard spring security configuration</a> elements.  For Tonr,
you&#39;ll notice the definition of the OAuth consumer/client mechanism and the resource details.  For more information about the necessary
components of an OAuth provider and consumer, see the <a href="devguide.html">developers guide</a>.</p>

<p>You&#39;ll also notice the Spring Security filter chain in <code>applicationContext.xml</code> and how it&#39;s configured for OAuth support.</p>

<h3 id="toc_3">Deploy Sparklr</h3>

<div class="highlight"><pre><code class="text">    mvn install
    cd samples/oauth(2)/sparklr
    mvn tomcat:run
</code></pre></div>

<p>Sparklr should be started on port 8080.  Go ahead and browse to <a href="http;//localhost:8080/sparklr">http;//localhost:8080/sparklr</a>. Note the basic
login page and the page that can be used to browse Marissa&#39;s photos. Logout to ensure Marissa&#39;s session is no longer valid.  (Of course,
the logout isn&#39;t mandatory; an active Sparklr session will simply bypass the step that prompts for Marissa&#39;s credentials before
confirming authorization for Marissa&#39;s protected resources.)</p>

<h3 id="toc_4">Start Tonr.</h3>

<p>Shutdown sparklr (it will be launched in the same container when tonr runs), then</p>

<div class="highlight"><pre><code class="text">    mvn install
    cd samples/oauth(2)/tonr
    mvn tomcat:run
</code></pre></div>

<p>Tonr should be started on port 8080.  Browse to <a href="http://localhost:8080/tonr">http://localhost:8080/tonr(2)</a>. Note Tonr&#39;s home page has a &#39;2&#39; on the end if it is the oauth2 version.</p>

<h3 id="toc_5">Observe...</h3>

<p>Now that you&#39;ve got both applications deployed, you&#39;re ready to observe OAuth in action.</p>

<ol>
<li><p>Login to Tonr.</p>

<p>Marissa&#39;s credentials are already hardcoded into the login form.</p></li>
<li><p>Click to view Marissa&#39;s Sparklr photos.</p>

<p>You will be redirected to the Sparklr site where you will be prompted for Marissa&#39;s credentials.</p></li>
<li><p>Login to Sparklr.</p>

<p>Upon successful login, you will be prompted with a confirmation screen to authorize access to Tonr
for Marissa&#39;s pictures.</p></li>
<li><p>Click &quot;authorize&quot;.</p>

<p>Upon authorization, you should be redirected back to Tonr where Marissa&#39;s Sparklr photos are displayed
(presumably to be printed).</p></li>
</ol>

  </div>

  <footer class="footer">
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span8">
          <div class="navbar">
            <div class="container">
              <ul class="nav">
                <li><a href="http://springframework.io/tools">Tools</a></li>
                <li><a href="http://springframework.io/services">Services</a></li>
                <li><a href="http://springframework.io/about">About Us</a></li>
                <li><a href="http://springframework.io/jobs">Work With Us</a></li>
              </ul>
            </div>
          </div>
          &copy; <script type="text/javascript"> var d = new Date();
                document.write(d.getFullYear());</script> GoPivotal, Inc. All Rights Reserved.
          <a href="http://www.gopivotal.com/terms-of-use">Terms</a>,
          <a href="http://www.gopivotal.com/privacy-policy">Privacy</a>, and
          <a href="http://springframework.io/logos">Usage</a>
        </div>
        <div class="span4 footer-newsletter--wrapper pull-right">
          <div class="footer-newsletter--container">
            <form>
              <label>
                Subscribe to our newsletter
              </label>
              <div class="footer-subscribe--input--container">
                <input class="footer-subscribe--input" placeholder="Email Address (NOT REAL)" />
                <input type="submit" class="btn footer-subscibe--btn" value="Subscribe" />
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <div id="scrim"></div>
  <script type="text/html" id="project-documentation-widget-template">
    <div class="right-pane-widget--container no-top-border project-documentation--container">
        <div class="item-dropdown-widget">
            <div class="item-dropdown--title">{@= name @}</div>
            <div class="item--dropdown">
                <div class="item--body">
                    <div class="item--body-title">
                        <div class="item--left-column">Release</div>
                        <div class="item--right-column">Documentation</div>
                    </div>
                    {@ _.each(releases, function(release) { @}
                    <div class="item--body--version">
                        <div class="item--left-column">
                            <p>{@= release.version @}</p>
                            <div class="spring-icon {@= release.statusIconClass() @}"></div>
                        </div>
                        <div class="item--right-column">
                            <a href='{@= release.refDocUrl @}' class="docs-link reference-link">Reference</a>
                            <a href='{@= release.apiDocUrl @}' class="docs-link api-link">API</a>
                        </div>
                    </div>
                    {@ }); @}
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/html" id="project-download-widget-controls-template">
    <div class="js-download-widget-selector">
        <select class='selector selectpicker'>
            {@ _.each(releases, function(release, index) { @}
            <option value="{@= index @}" data-content="<span>{@= release.versionDisplayName @}</span><div class='spring-icon {@= release.statusIconClass() @}'/>" data-current="{@= release.current @}"> ()</option>
            {@ }); @}
        </select>
    </div>

    <div class="item-slider-widget js-item-slider--wrapper">
        <div class="item-slider--container">
            <div class="item--slider js-item--slider"></div>
            <div class="item js-active js-item" data-snippet-type='maven'>
                Maven
            </div>
            <div class="item js-item" data-snippet-type='gradle'>
                Gradle
            </div>
            <div class="item js-item" data-snippet-type='zip'>
                Zip
            </div>
        </div>
    </div>

</script>








<script type="text/html" id="project-download-maven-widget-template">
&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;{@= groupId @}&lt;/groupId&gt;
        &lt;artifactId&gt;{@= artifactId @}&lt;/artifactId&gt;
        &lt;version&gt;{@= version @}&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
{@ if (repository) { @}
&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;{@= repository.id @}&lt;/id&gt;
        &lt;name&gt;{@= repository.name @}&lt;/name&gt;
        &lt;url&gt;{@= repository.url @}&lt;/url&gt;
        &lt;snapshots&gt;
            &lt;enabled&gt;{@= repository.snapshotsEnabled @}&lt;/enabled&gt;
        &lt;/snapshots&gt;
    &lt;/repository&gt;
&lt;/repositories&gt;{@ } @}
</script>







<script type="text/html" id="project-download-gradle-widget-template">
dependencies {
    compile '{@= groupId @}:{@= artifactId @}:{@= version @}'
}
{@ if (repository) { @}
repositories {
    maven {
        url '{@= repository.url @}'
    }
}
{@ } @}
</script>

<script type="text/html" id="project-download-zip-widget-template">
This is a zip url
</script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-42447510-1', 'cfapps.io');
    ga('send', 'pageview');

  </script>
</body>
</html>
