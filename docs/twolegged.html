<!DOCTYPE html>
<html>
<head>
  <title>Spring OAuth</title>
  <link rel="stylesheet" type="text/css" href="/spring-security-oauth/bootstrap/css/bootstrap.min.css" />
  <link href='http://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="/spring-security-oauth/font-awesome/css/font-awesome.min.css" />
  <link rel="stylesheet" type="text/css" href="/spring-security-oauth/bootstrap/css/bootstrap-select.css" />

  <link rel="stylesheet" type="text/css" href="/spring-security-oauth/css/main.css.css" />
  <link rel="stylesheet" type="text/css" href="/spring-security-oauth/css/typography.css.css" />
  <link rel="stylesheet" type="text/css" href="/spring-security-oauth/css/icons.css.css" />
  <link rel="stylesheet" type="text/css" href="/spring-security-oauth/css/projects.css.css" />
  <link rel="stylesheet" type="text/css" href="/spring-security-oauth/css/buttons.css.css" />
  <link rel="stylesheet" type="text/css" href="/spring-security-oauth/css/guide.css.css" />
  <link rel="stylesheet" type="text/css" href="/spring-security-oauth/css/highlight.css.css" />

  <script type="text/javascript" src="/spring-security-oauth/js/jquery.js"></script>
  <script type="text/javascript" src="/spring-security-oauth/bootstrap/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="/spring-security-oauth/bootstrap/js/bootstrap-select.js"></script>

  <script type="text/javascript" src="/spring-security-oauth/js/underscore.js"></script>
  <script type="text/javascript" src="/spring-security-oauth/js/backbone.js"></script>
  <script type="text/javascript" src="/spring-security-oauth/js/projectDocumentationWidget.js"></script>
  <script type="text/javascript" src="/spring-security-oauth/js/application.js"></script>
  <script type="text/javascript" src="/spring-security-oauth/js/ZeroClipboard.min.js"></script>
  <script type="text/javascript">
    var apiBaseUrl = "http://spring.io";
    var projectId = "spring-security-oauth";
    var siteBaseUrl = "/spring-security-oauth";
  </script>
  <script type="text/javascript" src="/spring-security-oauth/js/copySnippets.js"></script>
  <meta name="google-site-verification" content="7qGntFPD9lWAVCtUu5U77v4l68PsTHf6xpzgjQv2j2M" />
</head>
<body>
  <header class="navbar header--navbar">
    <div class="navbar-inner">
      <div class="container-fluid">
        <div class="spring-logo--container">
          <div class="logo-bg"></div>
          <a class="spring-logo" href="http://spring.io"></a>
        </div>
        <ul class="nav pull-right">
          <li class="navbar-link">
            <a href="http://spring.io/docs">Docs</a>
          </li>
          <li class="navbar-link">
            <a href="http://spring.io/guides">Guides</a>
          </li>
          <li class="navbar-link active">
            <a href="http://spring.io/projects">Projects</a>
          </li>
          <li class="navbar-link">
            <a href="http://spring.io/blog">Blog</a>
          </li>
          <li class="navbar-link">
            <a href="http://forum.spring.io">Forum</a>
          </li>
          <li class="navbar-link nav-search">
            <i class="icon-search navbar-search--icon js-search-input-open"></i>
            <div class="search-input-close js-search-input-close">x</div>
          </li>
        </ul>
      </div>
    </div>
    <div class="search-dropdown--container js-search-dropdown">
      <div class="container-fluid">
        <div class="search-form--container">
          <form class="form-inline form-search" action="http://spring.io/search" method="get">
            <input type="text" class="search-query search-form--form js-search-input" placeholder="Search for documention, guides, and posts..." name="q" />
            <button type="submit" class="search-form--submit"><i class="icon-search"></i></button>
          </form>
        </div>
      </div>
    </div>
  </header>

  <div class="body--container container-fluid">
    <h1 id="toc_0">2-Legged OAuth</h1>

<p>Two-legged OAuth (also known as &quot;signed fetch&quot;) is basically OAuth without the user. It&#39;s a way for a consumer (i.e. client) to make a signed request
to a provider (i.e. server) by leveraging the OAuth signature algorithm. This means that the provider has an extra level of trust with the consumer and will
therefore provide data to the consumer without making an end-user authorize a token.</p>

<p>This has particular applicability to gadget frameworks. For example, <a href="http://www.opensocial.org/">OpenSocial</a> platforms often use 2-legged OAuth so gadget
developers can have the gadget (the OAuth consumer) make Web service requests to their remote server (the OAuth provider). Since the gadget developer and
the server developer are often the same entity, the server can trust the gadget without the need for the gadget to obtain special permission from the user to
access the user&#39;s data.</p>

<p>To implement 2-legged OAuth using <em>OAuth for Spring Security</em>, all that is needed is for the provider to indicate that a specific consumer has an extra
level of trust. To do this, make sure your implementation of <a href="http://static.springsource.org/spring-security/oauth/apidocs/org/springframework/security/oauth/provider/ConsumerDetailsService.html"><code>ConsumerDetailsService</code></a> returns instances of 
<a href="http://static.springsource.org/spring-security/oauth/apidocs/org/springframework/security/oauth/provider/ConsumerDetails.html"><code>ConsumerDetails</code></a> that implement <a href="http://static.springsource.org/spring-security/oauth/apidocs/org/springframework/security/oauth/provider/ExtraTrustConsumerDetails.html"><code>ExtraTrustConsumerDetails</code></a>. Then, for each consumer
that doesn&#39;t need to obtain a user-authorized token, make sure <a href="http://static.springsource.org/spring-security/oauth/apidocs/org/springframework/security/oauth/provider/ExtraTrustConsumerDetails.html#isRequiredToObtainAuthenticatedToken()"><code>ExtraTrustConsumerDetails.isRequiredToObtainAuthenticatedToken()</code></a>
returns <code>false</code>.</p>

<p>In many instances, providers may want to manage the authentication that is set up in the security context. By default for 2-legged OAuth, only the consumer&#39;s
authentication will be set up in the context. However, if a user authentication is needed in the context, provide an alternate implementation of
<code>org.springframework.security.oauth.provider.OAuthAuthenticationHandler</code> that loads the user authentication, and provide a reference to the alternate
implementation using the &quot;auth-handler-ref&quot; attribute of the &quot;provider&quot; configuration element.</p>

  </div>

  <footer class="footer">
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span8">
          <div class="navbar">
            <div class="container">
              <ul class="nav">
                <li><a href="http://spring.io/tools">Tools</a></li>
                <li><a href="http://spring.io/services">Services</a></li>
                <li><a href="http://spring.io/about">About Us</a></li>
                <li><a href="http://spring.io/jobs">Work With Us</a></li>
              </ul>
            </div>
          </div>
          &copy; <script type="text/javascript"> var d = new Date();
                document.write(d.getFullYear());</script> GoPivotal, Inc. All Rights Reserved.
          <a href="http://www.gopivotal.com/terms-of-use">Terms</a>,
          <a href="http://www.gopivotal.com/privacy-policy">Privacy</a>, and
          <a href="http://spring.io/logos">Usage</a>
        </div>
        <div class="span4 footer-newsletter--wrapper pull-right">
          <div class="footer-newsletter--container">
            <form>
              <label>
                Subscribe to our newsletter
              </label>
              <div class="footer-subscribe--input--container">
                <input class="footer-subscribe--input" placeholder="Email Address (NOT REAL)" />
                <input type="submit" class="btn footer-subscibe--btn" value="Subscribe" />
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <div id="scrim"></div>
  <script type="text/html" id="project-documentation-widget-template">
    <div class="right-pane-widget--container no-top-border project-documentation--container">
        <div class="item-dropdown-widget">
            <div class="item-dropdown--title">{@= name @}</div>
            <div class="item--dropdown">
                <div class="item--body">
                    <div class="item--body-title">
                        <div class="item--left-column">Release</div>
                        <div class="item--right-column">Documentation</div>
                    </div>
                    {@ _.each(releases, function(release) { @}
                    <div class="item--body--version">
                        <div class="item--left-column">
                            <p>{@= release.versionDisplayName @}</p>
                            {@ if(release.current) { @}
                                <div class="spring-icon spring-icon-current-version"></div>
                            {@ } @}
                            <div class="spring-icon {@= release.statusIconClass() @}"></div>
                        </div>
                        <div class="item--right-column">
                            <a href='{@= release.refDocUrl @}' class="docs-link reference-link">Reference</a>
                            <a href='{@= release.apiDocUrl @}' class="docs-link api-link">API</a>
                        </div>
                    </div>
                    {@ }); @}
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/html" id="project-download-widget-controls-template">
    <div class="js-download-widget-selector">
        <select class='selector selectpicker'>
            {@ _.each(releases, function(release, index) { @}
            <option value="{@= index @}"
                    data-content="
                        <span>{@= release.versionDisplayName @}</span>
                        {@ if(release.current) { @}
                            <div class='spring-icon spring-icon-current-version'></div>
                        {@ } @}
                        <div class='spring-icon {@= release.statusIconClass() @}'/>"
                    data-current="{@= release.current @}">
                ()
            </option>
            {@ }); @}
        </select>
    </div>

    <div class="item-slider-widget js-item-slider--wrapper">
        <div class="item-slider--container">
            <div class="item--slider js-item--slider"></div>
            <div class="item js-active js-item" data-snippet-type='maven'>
                Maven
            </div>
            <div class="item js-item" data-snippet-type='gradle'>
                Gradle
            </div>
        </div>
    </div>

</script>








<script type="text/html" id="project-download-maven-widget-template">
<span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>{@= groupId @}<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>{@= artifactId @}<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>{@= version @}<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;/dependencies&gt;</span>
{@ if (repository) { @}
<span class="nt">&lt;repositories&gt;</span>
    <span class="nt">&lt;repository&gt;</span>
        <span class="nt">&lt;id&gt;</span>{@= repository.id @}<span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;name&gt;</span>{@= repository.name @}<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;url&gt;</span>{@= repository.url @}<span class="nt">&lt;/url&gt;</span>
        <span class="nt">&lt;snapshots&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>{@= repository.snapshotsEnabled @}<span class="nt">&lt;/enabled&gt;</span>
        <span class="nt">&lt;/snapshots&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
<span class="nt">&lt;/repositories&gt;</span>
{@ } @}
</script>







<script type="text/html" id="project-download-gradle-widget-template">
<span class="n">dependencies&nbsp;</span><span class="o">{</span>
    <span class="n">compile&nbsp;</span><span class="s1">'{@= groupId @}:{@= artifactId @}:{@= version @}'</span>
<span class="o">}</span>
{@ if (repository) { @}
<span class="n">repositories&nbsp;</span><span class="o">{</span>
    <span class="n">maven&nbsp;</span><span class="o">{</span>
        <span class="n">url&nbsp;</span><span class="s1">'{@= repository.url @}'</span>
    <span class="o">}</span>
<span class="o">}</span>
{@ } @}
</script>

<script type="text/html" id="project-download-zip-widget-template">
This is a zip url
</script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-42447510-1', 'cfapps.io');
    ga('send', 'pageview');

  </script>
</body>
</html>
